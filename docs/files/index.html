<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="Permissions-Policy" content="interest-cohort=()"/><link rel="icon" href="/core/favicon.ico"/><title>@magic/core documentation</title><meta name="twitter:image" property="og:image" content="https:/magic.github.io/core/logo.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="@magic/core directory docs."/><meta name="author" content="Jascha Ehrenreich"/><script type="application/ld+json">{"@context":"http://schema.org","@type":"website","name":"@magic/core documentation","url":"https://magic.github.io/core/","about":"@magic framework core.","image":"https:/magic.github.io/core/logo.png","author":{"@type":"person","name":"Jascha Ehrenreich","jobTitle":"Technomancer","image":"https:/jaeh.at/img/jascha.ehrenreich.jpg","url":"https://jaeh.at"}}</script><link rel="stylesheet" href="/core/magic.css?Nj2IamFf3l" integrity="sha384-Nj2IamFf3lkwe0d0bnbjKwzfIxgRaUMjXNF4oaceiWFk5CQEsD6Ax7cWvVMOUkB+" crossorigin="anonymous"/></head><body><a class="SkipLink" href="/core/#page">Skip to Content</a><div id="PREPENDTag"></div><main id="Magic"><div class="Wrapper"><header class="Header"><a class="Logo" href="/core/"><svg viewBox="0 0 512 444"><path d="M512 444L256 0 0 444z" fill="#663695"></path><circle cx="256" cy="294" r="130" fill="#fff"></circle><circle cx="256" cy="281" r="40" fill="#663695"></circle><path d="M256 350v44m24-44l1 13c1 27 29 27 29-7m-160-72s46-47 106-47c59 0 106 47 106 47s-47 43-106 43c-60 0-106-43-106-43zm65-75a134 134 0 0189 2" class="stroke"></path><path d="M256 81v53m184 270l-43-29M72 404l43-29" class="stroke white"></path></svg></a><p>@magic</p><nav class="Menu"><ul><li><a href="/core/concepts/">concepts</a></li><li class="active"><a href="/core/files/">files &amp; directories</a><ul><li><a href="/core/files/#pages">/pages</a></li><li><a href="/core/files/#assets">/assets</a></li><li><a href="/core/files/#static">/assets/static</a></li><li><a href="/core/files/#themes">/assets/themes</a></li><li><a href="/core/files/#app">app.mjs</a></li><li><a href="/core/files/#config">/config.mjs</a></li></ul></li><li><a href="/core/modules/">modules</a></li><li><a href="/core/themes/">themes</a></li><li><a href="/core/libraries/">libraries</a></li><li><a href="/core/news/">news</a></li><li><a href="/core/test/">test</a></li></ul></nav></header><div class="Page" id="page"><h1>@magic/core files</h1><p>There are multiple magic files and directories.</p><ul><li>/pages - files in the page directory map to urls in your app.</li><li>/assets - custom components, @magic-modules get imported here</li><li>/assets/static - static files</li><li>/assets/themes - theme directory, @magic-themes get imported here</li><li>/assets/lib.mjs - imports npm and local but external packages into your app</li><li>/app.mjs - gets merged into the app, can set state, actions, style here</li><li>/config.mjs - custom config for your app</li><li>/assets/Menu.mjs - custom Menu for your app</li></ul><h2 id="pages">/pages</h2><p>the pages dir contains the pages of your webapp.</p><p>each page has it&#39;s own state and actions, but also inherits the global state and actions from the app and it&#39;s dependencies</p><h3 id="pages-dir-structure">pages directory to url map</h3><p>for the domain mag.ic:</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">/pages/index.mjs === <a href="http://mag.ic/" target="_blank" rel="noopener">http://mag.ic/</a></code><code class="line">/pages/pageName.mjs === <a href="http://mag.ic/pageName/" target="_blank" rel="noopener">http://mag.ic/pageName/</a></code><code class="line">/pages/page-name.mjs === <a href="http://mag.ic/page-name/" target="_blank" rel="noopener">http://mag.ic/page-name/</a></code><code class="line">/pages/page_name.mjs === <a href="http://mag.ic/page_name/" target="_blank" rel="noopener">http://mag.ic/page_name/</a></code><code class="line">/pages/dir/index.mjs === <a href="http://mag.ic/dir/" target="_blank" rel="noopener">http://mag.ic/dir/</a></code><code class="line">/pages/dir/name.mjs === <a href="http://mag.ic/dir/name/" target="_blank" rel="noopener">http://mag.ic/dir/name/</a></code></pre></div><h1 id="pages-example">example page</h1><p>Pages can use javascript, html or markdown</p><h2 id="pages-example-js">javascript example</h2><p>A magic javascript page is a @magic-module. The only difference is that pages get exposed via http</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> View = <span class="state">state</span> <span class="keyword">=&gt;</span></code><code class="line">  div({ class: <span class="string">&#39;cl&#39;</span> }, [</code><code class="line">    <span class="string">&#39;this is the page content.&#39;</span>,</code><code class="line">    state.variable,</code><code class="line">  ])</code><code class="line"></code><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="state">state</span> = {</code><code class="line">  variable: <span class="string">&#39;test&#39;</span>,</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="actions">actions</span> = {</code><code class="line">  changeVar: () <span class="keyword">=&gt;</span> ({ variable: <span class="string">&#39;changed&#39;</span> }),</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;.cl&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;green&#39;</span>,</code><code class="line">  },</code><code class="line">}</code></pre></div><h2 id="pages-example-html">html example</h2><p>html pages can only export state and View.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">---</code><code class="line">@state</code><code class="line">{</code><code class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;html file example&quot;</span>,</code><code class="line">    <span class="string">&quot;description&quot;</span>: <span class="string">&quot;this module gets imported from a html file.&quot;</span></code><code class="line">}</code><code class="line">---</code><code class="line"></code><code class="line">&lt;h2&gt;&amp;#36;{ state.title }&lt;/h4&gt;</code><code class="line"></code><code class="line">&lt;p&gt;{{ state.description }}&lt;/p&gt;</code></pre></div><h2 id="pages-example-markdown">markdown example</h2><p>markdown pages can only export state and View.</p><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line">---</code><code class="line">@state {</code><code class="line">  <span class="string">&quot;title&quot;</span>: <span class="string">&quot;markdown file example&quot;</span>,</code><code class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;markdown file description&quot;</span></code><code class="line">}</code><code class="line">---</code><code class="line"></code><code class="line">## &amp;#36;{state.title}</code><code class="line"></code><code class="line">&amp;#36;{state.description}</code></pre></div><h2 id="assets">assets</h2><p>the assets dir contains custom components of your app.</p><p>you can import additional @magic-modules here</p><h3 id="assets-example">/assets/index.mjs</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  Custom: () <span class="keyword">=&gt;</span> div(<span class="string">&#39;custom component&#39;</span>),</code><code class="line">  Pre: require(&#39;@magic-modules/pre),</code><code class="line">}</code></pre></div><h2 id="static">/assets/static</h2><p>the static dir contains all of your static assets.every file in this directory gets copied to the public dir.image and svg files get minified using imagemin.</p><p>text and binary files get compressed using the optional <a href="https://github.com/jaeh/node-zopfli-es" target="_blank" rel="noopener">node-zopfli-es</a> (if it is installed)</p><h2 id="themes">/assets/themes</h2><p>the themes directory contains...themes.</p><p>a magic theme is an object of css rules, see <a href="https://github.com/magic/css/" target="_blank" rel="noopener">@magic/css</a> for more examples and documentation.</p><h3 id="themes-example">example theme</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="string">&#39;body&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;blue&#39;</span>,</code><code class="line">  },</code><code class="line">}</code></pre></div><h2 id="app">/app.mjs</h2><p>the /app.mjs file allows you to set global state, actions, and styles</p><h3 id="app-example">/example/app.mjs</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="state">state</span> = {</code><code class="line">  globalStateVar: <span class="string">&#39;globally available&#39;</span>,</code><code class="line">}</code><code class="line"></code><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="actions">actions</span> = {</code><code class="line">  globalAction: () <span class="keyword">=&gt;</span> ({ globalStateVar: <span class="string">&#39;overwritten.&#39;</span> }),</code><code class="line">}</code><code class="line"> </code><code class="line"><span class="keyword">export</span> <span class="keyword">const</span> style = {</code><code class="line">  <span class="string">&#39;body&#39;</span>: {</code><code class="line">    color: <span class="string">&#39;green&#39;</span>,</code><code class="line">  },</code><code class="line">}</code></pre></div><h2 id="config">/config.mjs</h2><p>the /config.mjs file allows you to set various aspects of your app</p><h3 id="config-example">/config.mjs example</h3><div class="Pre lines"><div class="menu"><button>copy</button></div><pre><code class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</code><code class="line">  <span class="comment">// the local root directory of the magic app</span></code><code class="line">  ROOT: <span class="string">&#39;example&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// gets suffixed to the url. <span class="keyword">in</span> <span class="keyword">this</span> <span class="keyword">case</span> domain.com/core/ will be the page root.</span></code><code class="line">  WEB_ROOT: <span class="string">&#39;/core/&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// the theme <span class="keyword">in</span> use, lives <span class="keyword">in</span> {ROOT}/assets/themes/{name} or can be installed as either &#39;@magic-themes/{name}&#39; or &#39;magic-theme-{name}&#39;</span></code><code class="line">  THEME: <span class="string">&#39;docs&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// the full url of the page.</span></code><code class="line">  URL: <span class="string">&#39;magic.github.io/core/&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// the <span class="keyword">public</span> dir the bundles <span class="keyword">get</span> written to</span></code><code class="line">  PUBLIC: <span class="string">&#39;docs&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// the directory <span class="keyword">in</span> the pages directory that holds the blog posts</span></code><code class="line">  <span class="comment">// <span class="keyword">if</span> <span class="keyword">this</span> is not set, no blog is created.</span></code><code class="line">  BLOG_DIR: <span class="string">&#39;news&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// append these modules after the app loaded and only <span class="keyword">if</span> javascript is enabled.</span></code><code class="line">  <span class="comment">// can be used to add features that won&#39;t <span class="keyword">do</span> anything without js anyways.</span></code><code class="line">  HOIST: [<span class="string">&#39;LightSwitch&#39;</span>, <span class="string">&#39;NoSpy&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// <span class="keyword">default</span> CLIENT_LIB_NAME, overwrite to change names of transpiled css and js files</span></code><code class="line">  CLIENT_LIB_NAME: <span class="string">&#39;magic&#39;</span>,</code><code class="line"></code><code class="line">  <span class="comment">// show babel debug information</span></code><code class="line">  BABEL: {</code><code class="line">    BABEL_DEBUG: true,</code><code class="line">  },</code><code class="line"></code><code class="line">  <span class="comment">// <span class="keyword">this</span> is set to be able to test broken link behaviour.</span></code><code class="line">  <span class="comment">// DO NOT ENABLE IN YOUR APP (unless you need to because reasons...)</span></code><code class="line">  NO_CHECK_LINKS_EXIT: true,</code><code class="line"></code><code class="line">  <span class="comment">// tags written to the html before the #magic container</span></code><code class="line">  PREPEND_TAGS: [{ name: <span class="string">&#39;div&#39;</span>, props: { id: <span class="string">&#39;PREPENDTag&#39;</span> } }],</code><code class="line"></code><code class="line">  <span class="comment">// tags written to the html after the #magic container</span></code><code class="line">  APPEND_TAGS: [{ name: <span class="string">&#39;div&#39;</span>, props: { id: <span class="string">&#39;APPENDTag&#39;</span> } }],</code><code class="line"></code><code class="line">  <span class="comment">// script files, embedded before the magic.js script</span></code><code class="line">  PREPEND_SCRIPTS: [<span class="string">&#39;/prependScript.js&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// script files, embedded after the magic.js script</span></code><code class="line">  APPEND_SCRIPTS: [<span class="string">&#39;/appendScript.js&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// js files that <span class="keyword">get</span> written directly into the magic.js script, before the magic code.</span></code><code class="line">  PREPEND_JS: [<span class="string">&#39;/prependJs.js&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// js files that <span class="keyword">get</span> written directly into the magic.js script, after the magic code.</span></code><code class="line">  APPEND_JS: [<span class="string">&#39;/appendJs.js&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// css written into the magic.css file, before the magic css</span></code><code class="line">  <span class="comment">// use <span class="keyword">this</span> to set defaults that <span class="keyword">get</span> overwritten by the generated app css</span></code><code class="line">  PREPEND_CSS: [<span class="string">&#39;/prependCss.css&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// css written into the magic.css file, after the magic css</span></code><code class="line">  <span class="comment">// use <span class="keyword">this</span> to overwrite the generated app css</span></code><code class="line">  APPEND_CSS: [<span class="string">&#39;/appendCss.css&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// add additional <span class="keyword">static</span> file directories that will <span class="keyword">get</span> added to app.static[name]</span></code><code class="line">  ADD_STATIC: [<span class="string">&#39;node_modules/dir/name/&#39;</span>],</code><code class="line"></code><code class="line">  <span class="comment">// <span class="keyword">this</span> option adds the</span></code><code class="line">  <span class="comment">// &#39;X-Clacks-Overhead&#39;, &#39;GNU Terry Pratchet&#39;</span></code><code class="line">  <span class="comment">// http header</span></code><code class="line">  <span class="comment">// see <a href="http://www.gnuterrypratchett.com/" target="_blank" rel="noopener">http://www.gnuterrypratchett.com/</a></span></code><code class="line">  FOR_DEATH_CAN_NOT_HAVE_HIM: true,</code><code class="line">}</code></pre></div><p><a href="https://github.com/magic/core/blob/master/src/modules/Menu.mjs" target="_blank" rel="noopener">Menu.mjs on github</a></p></div><footer class="Footer"><div class="Container"><div class="Credits">made with a few bits of <a target="_blank" rel="noopener" href="https://magic.github.io/">magic</a></div></div></footer></div></main><div id="APPENDTag"></div><script src="/core/prependScript.js"></script><script src="/core/magic.js?CjRF55MpAq" integrity="sha384-CjRF55MpAqhnX+E98Mf86Il4MbGw3THVX+bt47o2RckjwWuIL4yVroZdwJYV4rDO" crossorigin="anonymous"></script><script src="/core/appendScript.js"></script></body></html>